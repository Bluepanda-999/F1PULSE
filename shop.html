<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>F1 Shop</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0a0a0a; --surface:#101112; --panel:#121314; --border:rgba(255,255,255,.08);
  --text:#f5f5f5; --muted:#b6b6b6; --brand:#e10600; --ok:#19c37d; --err:#ff4f4f;
  --radius:14px;
}

/* ===== Base ===== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--text); font-family:'Roboto',system-ui,Segoe UI,Arial;
  background:
    radial-gradient(1200px 400px at 50% -180px, rgba(225,6,0,.25), transparent 60%),
    linear-gradient(180deg,#0b0b0b 0%, #0a0a0a 55%, #050505 100%);
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
}

/* ===== Toolbar with red-black vibe ===== */
.toolbar{
  max-width:1200px;margin:22px auto 12px;padding:0 20px;display:flex;gap:12px;align-items:center;flex-wrap:wrap
}
.pulse-title{
  font-family:'Orbitron',sans-serif;font-weight:800;letter-spacing:2px;color:var(--brand);
  font-size:2rem;text-transform:uppercase;text-shadow:0 0 12px rgba(225,6,0,.45);
  display:flex;gap:10px;align-items:center
}
.finish-line{
  width:38px;height:10px;border-radius:3px;
  background:repeating-linear-gradient(90deg,var(--brand) 0 9px,#fff 9px 18px)
}
.chip-icon{
  display:flex;align-items:center;gap:8px;background:linear-gradient(180deg,#161616,#0f0f0f);
  border:1px solid var(--border);color:#fafafa;padding:8px 12px;border-radius:999px;cursor:pointer
}
.count{background:var(--brand);color:#fff;font-weight:800;font-size:.78rem;padding:2px 6px;border-radius:999px;margin-left:6px}

/* ===== Stylish Search (kept, tuned for red-black) ===== */
.searchbar{flex:1;display:flex;align-items:center;gap:10px;min-width:280px}
.search-wrap{
  position:relative;flex:1;display:grid;grid-template-columns:auto 1fr auto auto;align-items:center;
  background:rgba(12,12,12,.82);border:1px solid var(--border);
  border-radius:999px;padding:8px 10px;overflow:hidden;box-shadow:0 0 0 1px rgba(225,6,0,.08) inset;
}
.search-wrap::before{
  content:"";position:absolute;inset:-2px;border-radius:999px;
  background:conic-gradient(from 0deg,#e10600,#a80a00,#2a0a0a,#e10600);
  filter:blur(10px);opacity:.16;z-index:0;transition:.25s;
}
.search-wrap:focus-within::before{opacity:.34}
.search-icon{z-index:1;margin:0 6px 0 4px;opacity:.95}
.search-input{z-index:1;background:transparent;border:0;outline:0;color:#fff;font-size:.95rem}
.search-input::placeholder{color:#a6aab0}
.clear-btn{
  z-index:1;display:none;border:1px solid var(--border);background:#191919;color:#eee;
  width:28px;height:28px;border-radius:999px;cursor:pointer;margin-right:6px
}
.search-btn{
  z-index:1;border:0;border-left:1px solid var(--border);padding:8px 12px;border-radius:999px;
  background:linear-gradient(180deg,#ff3a28,var(--brand));color:#fff;font-weight:800;cursor:pointer;
}
.result-badge{display:none;background:#161616;border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-size:.85rem;color:#dfe3e6}

/* ===== Categories ===== */
.cats{max-width:1200px;margin:0 auto;padding:10px 20px 14px;display:flex;gap:10px;flex-wrap:wrap}
.pill{border:1px solid var(--border);color:#c7c7c7;padding:8px 14px;border-radius:999px;cursor:pointer;background:linear-gradient(180deg,#151515,#0e0e0e)}
.pill.active{color:#fff;border-color:var(--brand);box-shadow:0 0 0 1px #e106001f}

/* ===== Layout ===== */
.container{max-width:1200px;margin:20px auto;padding:0 20px;display:grid;gap:22px;grid-template-columns:1fr 340px}
@media (max-width:980px){.container{grid-template-columns:1fr}}

/* ===== Product Cards ===== */
.grid{display:grid;gap:16px;grid-template-columns:repeat(3,minmax(0,1fr))}
@media (max-width:1100px){.grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media (max-width:640px){.grid{grid-template-columns:1fr}}

.card{border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;background:linear-gradient(180deg,#151515,#0d0d0d);transition:.18s}
.card:hover{transform:translateY(-2px);box-shadow:0 10px 26px rgba(0,0,0,.65)}
.card .img{aspect-ratio:4/3;background:#0f0f0f center/cover no-repeat;border-bottom:1px solid var(--border);position:relative}
.badge{
  position:absolute;left:10px;top:10px;font-family:'Orbitron',sans-serif;font-weight:800;letter-spacing:.5px;
  background:linear-gradient(180deg,#ff3a28,var(--brand));color:#fff;padding:4px 8px;border-radius:6px;font-size:.7rem
}
.card .body{padding:12px}
.team{font-size:.74rem;color:#c0c0c0;letter-spacing:.35px;text-transform:uppercase}
.name{font-weight:700;margin:4px 0 8px}
.row{display:flex;gap:10px;align-items:center;margin-top:8px}
select,.qty{padding:8px 10px;border-radius:12px;border:1px solid var(--border);background:linear-gradient(180deg,#151515,#0e0e0e);color:#fff;outline:0}
.qty{width:80px}
.btn{
  width:100%;margin-top:10px;border:0;cursor:pointer;font-weight:800;padding:11px 14px;border-radius:12px;color:#fff;
  background:linear-gradient(180deg,#ff3a28,var(--brand));box-shadow:0 6px 18px rgba(225,6,0,.35)
}
.price{font-size:1.05rem}

/* ===== Sidebar Cards ===== */
.sidebar-card{border:1px solid var(--border);border-radius:var(--radius);background:linear-gradient(180deg,#161616,#0f0f10);padding:14px}
.sidebar-card h3{margin:0 0 10px;font-family:'Orbitron',sans-serif}
.mini{font-size:.85rem;opacity:.9}
.small{font-size:.92rem;color:#d9d9d9}

.cart-empty{color:#a9a9a9;padding:10px 0}
.cart-item{display:grid;grid-template-columns:54px 1fr auto;gap:10px;align-items:center;padding:10px 0;border-bottom:1px solid var(--border)}
.thumb{width:54px;height:54px;border-radius:10px;background:#111 center/cover no-repeat;border:1px solid var(--border)}
.qtybox{display:flex;align-items:center;gap:8px;margin-top:6px}
.icon-btn{width:28px;height:28px;border-radius:8px;border:1px solid var(--border);background:linear-gradient(180deg,#161616,#0f0f0f);color:#fff;cursor:pointer}
.rm{color:#bbb;cursor:pointer;font-size:.85rem}
.rm:hover{color:#fff}
.line{display:flex;justify-content:space-between;padding:6px 0;color:#dfdfdf}
.line.total{border-top:1px solid var(--border);margin-top:8px;padding-top:10px;font-weight:800}
.code{display:flex;gap:8px;margin:12px 0}
.code input{flex:1;padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:linear-gradient(180deg,#151515,#0e0e0e);color:#fff}
.hint{color:#9bd}
.checkout{
  width:100%;padding:12px 14px;border-radius:12px;background:linear-gradient(180deg,#ff3a28,var(--brand));
  border:none;color:#fff;font-weight:900;cursor:pointer;margin-top:8px;box-shadow:0 10px 28px rgba(225,6,0,.25)
}
.note{color:#a7a7a7}

/* ===== Profile Slide-out & overlays (kept) ===== */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);backdrop-filter:blur(2px);display:none;z-index:1200}
.overlay.open{display:block}
.profile-panel{
  position:fixed;top:0;right:-420px;height:100vh;width:min(420px,92vw);
  background:linear-gradient(180deg,#1a0b0b,#0f0f10);
  border-left:1px solid var(--border);box-shadow:-20px 0 60px rgba(0,0,0,.6);
  z-index:1210;transition:right .28s;display:flex;flex-direction:column
}
.profile-panel.open{right:0}
.profile-head{display:flex;align-items:center;justify-content:space-between;padding:14px;border-bottom:1px solid var(--border)}
.profile-head h3{margin:0;font-family:'Orbitron',sans-serif}
.close-x{border:1px solid var(--border);background:#151515;color:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}
.profile-body{padding:14px;overflow:auto}
.profile-row{display:flex;flex-direction:column;gap:4px;margin-bottom:10px}
.profile-row small{color:#aeb3b8}
.profile-val{font-weight:800}

/* ===== Payment Modal (red-black) ===== */
.pay-wrap{position:fixed;inset:0;display:none;place-items:center;z-index:1300}
.pay-wrap.open{display:grid}
.pay-card{
  width:min(560px,94vw);border-radius:16px;overflow:hidden;border:1px solid var(--border);
  background:linear-gradient(180deg,#1b0c0c,#0e0f10);
  box-shadow:0 40px 120px rgba(0,0,0,.7), 0 0 0 1px rgba(225,6,0,.15) inset
}
.pay-head{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;background:linear-gradient(180deg,#2a0d0d,#140a0a);border-bottom:1px solid var(--border)}
.pay-head h3{margin:0;font-family:'Orbitron',sans-serif;letter-spacing:.4px}
.pay-body{padding:16px}
.field{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}
.field input{
  padding:10px 12px;border-radius:12px;border:1px solid var(--border);
  background:linear-gradient(180deg,#161616,#0f0f0f);color:#fff;outline:0
}
.row2{display:grid;gap:10px;grid-template-columns:1fr 1fr}
.err{color:var(--err);font-size:.86rem;min-height:1.1em}
.pay-btn{
  width:100%;padding:12px;border-radius:12px;border:0;cursor:pointer;font-weight:900;color:#fff;
  background:linear-gradient(180deg,#ff3a28,var(--brand));box-shadow:0 10px 28px rgba(225,6,0,.3)
}
.pay-note{color:#a7a7a7;font-size:.85rem;margin-top:6px}
.pay-close{border:1px solid var(--border);background:#171717;color:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}

/* Processing + success */
.center{display:flex;align-items:center;justify-content:center;gap:10px}
.spinner{
  width:18px;height:18px;border-radius:50%;border:3px solid rgba(255,255,255,.2);
  border-top-color:#fff;animation:spin .8s linear infinite
}
@keyframes spin{to{transform:rotate(360deg)}}
.receipt{background:#111214;border:1px dashed var(--border);border-radius:12px;padding:12px;margin-top:12px}
</style>
</head>
<body>

<!-- ===== Toolbar ===== -->
<div class="toolbar">
  <div class="pulse-title"><span class="finish-line"></span> F1&nbsp;PULSE</div>

  <!-- Search -->
  <div class="searchbar">
    <div class="search-wrap">
      <span class="search-icon">ðŸ”Ž</span>
      <input id="search" class="search-input" type="search" placeholder="Search by name, team, or categoryâ€¦" />
      <button id="clearSearch" class="clear-btn" title="Clear">Ã—</button>
      <button id="doSearch" class="search-btn" title="Search">Search</button>
    </div>
    <span id="resultBadge" class="result-badge"></span>
  </div>

  <div class="chip-icon" id="sortPrice">Sort: Price</div>
  <div class="chip-icon" id="openCart">Cart <span id="cartCount" class="count">0</span></div>

  <div style="margin-left:auto;display:flex;gap:8px">
    <div class="chip-icon" id="btnLogin">Log In</div>
    <div class="chip-icon" id="btnSignup">Sign Up</div>
    <div class="chip-icon" id="btnProfile" style="display:none;">Profile</div>
    <div class="chip-icon" id="btnLogout" style="display:none;">Logout</div>
  </div>
</div>

<!-- ===== Categories ===== -->
<div class="cats" id="catBar">
  <span class="pill active" data-cat="All">All</span>
  <span class="pill" data-cat="Men">Men</span>
  <span class="pill" data-cat="Women">Women</span>
  <span class="pill" data-cat="Kids">Kids</span>
  <span class="pill" data-cat="Headwear">Headwear</span>
  <span class="pill" data-cat="Gifts">Gifts & Accessories</span>
</div>

<!-- ===== Main ===== -->
<main class="container">
  <section>
    <div class="grid" id="grid"></div>
  </section>

  <!-- Cart Sidebar -->
  <aside class="sidebar-card" id="cartPanel" aria-live="polite">
    <h3>Order Summary</h3>
    <div id="cartItems"></div>

    <div class="code">
      <input id="promo" placeholder="Promo code (FITRACK = 30% off)" />
      <button class="chip-icon" id="apply">Apply</button>
    </div>
    <div class="mini" id="promoMsg"></div>

    <div class="line"><span>Items</span><b id="itemsCount">0</b></div>
    <div class="line"><span>Subtotal</span><b id="subTotal">Â£0.00</b></div>
    <div class="line"><span>Discount</span><b id="discount">â€”</b></div>
    <div class="line total"><span>Total</span><b id="grand">Â£0.00</b></div>
    <button class="checkout" id="checkoutBtn">Checkout</button>
    <div class="note">Coupon <b>FITRACK</b> applies 30% off the subtotal.</div>
  </aside>
</main>

<!-- ===== Profile Slide-out ===== -->
<div class="overlay" id="overlay"></div>
<aside class="profile-panel" id="profilePanel" aria-label="Profile">
  <div class="profile-head">
    <h3>Profile</h3>
    <button class="close-x" id="closeProfile">âœ•</button>
  </div>
  <div class="profile-body" id="profileBody"></div>
</aside>

<!-- ===== Signup / Login Drawers (reuse profile styles) ===== -->
<div class="overlay" id="drawerSignup" style="display:none;place-items:center;">
  <div class="profile-panel open" style="right:0;max-width:520px;width:min(520px,94vw)">
    <div class="profile-head">
      <h3>Sign Up</h3>
      <button class="close-x" data-close="#drawerSignup">âœ•</button>
    </div>
    <div class="profile-body">
      <div class="mini">Create a local demo account (stored only in your browser).</div>
      <div class="profile-row"><small>Full Name *</small><input id="suName" placeholder="Ayrton Senna" /></div>
      <div class="profile-row"><small>Email *</small><input id="suEmail" placeholder="you@example.com" /></div>
      <div class="profile-row"><small>Phone *</small><input id="suPhone" placeholder="+7 777 123 45 67" /></div>
      <div class="profile-row"><small>Password *</small><input id="suPass" type="password" placeholder="Min 6 chars, 1 letter, 1 number" /></div>
      <div class="profile-row"><small>Confirm Password *</small><input id="suPass2" type="password" placeholder="Repeat password" /></div>
      <div id="errSu" class="mini" style="color:var(--err)"></div>
      <button class="btn" id="doSignup">Create Account</button>
      <div id="okSignup" class="mini" style="color:var(--ok);margin-top:6px"></div>
    </div>
  </div>
</div>

<div class="overlay" id="drawerLogin" style="display:none;place-items:center;">
  <div class="profile-panel open" style="right:0;max-width:520px;width:min(520px,94vw)">
    <div class="profile-head">
      <h3>Log In</h3>
      <button class="close-x" data-close="#drawerLogin">âœ•</button>
    </div>
    <div class="profile-body">
      <div class="profile-row"><small>Email *</small><input id="liEmail" placeholder="you@example.com" /></div>
      <div class="profile-row"><small>Password *</small><input id="liPass" type="password" placeholder="Your password" /></div>
      <div id="errLogin" class="mini" style="color:var(--err)"></div>
      <button class="btn" id="doLogin">Log In</button>
    </div>
  </div>
</div>

<!-- ===== Payment Modal ===== -->
<div class="pay-wrap" id="payWrap">
  <div class="pay-card">
    <div class="pay-head">
      <h3>Secure Payment</h3>
      <button class="pay-close" id="closePay">Close</button>
    </div>
    <div class="pay-body" id="payBody">
      <!-- Payment form injected here -->
    </div>
  </div>
</div>

<script>
/* ====== Data (same as before) ====== */
const catalog=[
  {id:1, team:'Ferrari', name:'Team T-Shirt - Men', cat:'Men', price:45, img:'https://images.footballfanatics.com/scuderia-ferrari/scuderia-ferrari-2025-drivers-oversized-t-shirt-red_ss5_p-202359080+pv-2+u-7lr3myekybyuh9mjfyhz+v-tfdkcnfyfvrc3vhrfpi0.jpg?_hv=2&w=1018'},
  {id:2, team:'Ferrari', name:'Team Hoodie - Women', cat:'Women', price:79, img:'https://images.footballfanatics.com/scuderia-ferrari/scuderia-ferrari-hooded-sweat-by-puma-womens_ss5_p-202359010+pv-1+u-fbu5wjoqjqo85s6ouemu+v-oic9lvormvfrgfpdr5qx.jpg?_hv=2&w=1018'},
  {id:3, team:'Ferrari', name:'Kids Team T-shirt', cat:'Kids', price:29, img:'https://images.footballfanatics.com/scuderia-ferrari/scuderia-ferrari-puma-large-shield-t-shirt-red-kids_ss5_p-202359020+pv-1+u-8paybj2atur0hawi4a3o+v-l7ehjxtpqsojjsknn8vd.jpg?_hv=2&w=1018'},
  {id:4, team:'Red Bull', name:'Team Polo - Men', cat:'Men', price:59, img:'https://images.footballfanatics.com/red-bull-racing/red-bull-racing-2025-max-verstappen-team-polo-womens_ss5_p-201493648+pv-1+u-ocvcnq9mftw13vcfk14s+v-srhgwdvewqip0wzgjttr.jpg?_hv=2&w=1018'},
  {id:5, team:'Red Bull', name:'Womenâ€™s Team Cap', cat:'Headwear', price:34, img:'https://images.footballfanatics.com/red-bull-racing/red-bull-racing-new-era-seasonal-9forty-cap-red_ss5_p-202811783+pv-1+u-6j9kc8yp4b1mnafizlho+v-4rlpacmk7bkbvdirhmia.jpg?_hv=2&w=1018'},
  {id:6, team:'Red Bull', name:'Red Bull Umbrella', cat:'Gifts', price:24, img:'https://images.footballfanatics.com/red-bull-racing/red-bull-racing-compact-umbrella_ss5_p-201084137+pv-1+u-wcxjoavrksvbaktgjabb+v-4hxcsjqlulvgckzuxcfn.jpg?_hv=2&w=1018'},
  {id:7, team:'Mercedes', name:'Team Jacket - Men', cat:'Men', price:129, img:'https://images.footballfanatics.com/mercedes-amg-petronas-f1-team/mercedes-amg-petronas-adidas-f1-team-mechanics-rain-jacket-black_ss5_p-202359172+pv-9+u-rld1p2nosupuxajg7294+v-j2eyzz99rwelbfsq8dbx.jpg?_hv=2&w=1018'},
  {id:8, team:'Mercedes', name:'Team Cap', cat:'Headwear', price:32, img:'https://images.footballfanatics.com/mercedes-amg-petronas-f1-team/mercedes-amg-petronas-adidas-f1-2025-team-cap-black_ss5_p-202359125+pv-1+u-etafwq8d2cgrkm5tb575+v-iun8ilhrzlf049mrn5xx.jpg?_hv=2&w=1018'},
  {id:9, team:'Mercedes', name:'Kids Hoodie', cat:'Kids', price:45, img:'https://images.footballfanatics.com/mercedes-amg-petronas-f1-team/mercedes-amg-petronas-adidas-f1-2025-team-hoodie-black-kids_ss5_p-202358972+pv-1+u-oiem3jtclh1xmxtrune0+v-stbkojwxathfnz0sa8cm.jpg?_hv=2&w=1018'},
  {id:10, team:'McLaren', name:'Orange Race Lando Polo', cat:'Men', price:49, img:'https://images.footballfanatics.com/mclaren-f1-team/mclaren-2025-team-lando-norris-driver-polo_ss5_p-201493689+pv-1+u-xrhtz1vhzrsnheqttuod+v-tbtd8vec2j8f3hqi5ere.jpg?_hv=2&w=1018'},
  {id:11, team:'McLaren', name:'Papaya Hoodie', cat:'Women', price:69, img:'https://images.footballfanatics.com/mclaren-f1-team/mclaren-lando-norris-driver-hoodie-cream-unisex_ss5_p-202144187+pv-1+u-fmfrv5xr0xp7thzxhhie+v-utisckusu3amhy4cagvl.jpg?_hv=2&w=1018'},
  {id:12, team:'Aston Martin', name:'Green Team Polo', cat:'Men', price:65, img:'https://images.footballfanatics.com/aston-martin/aston-martin-aramco-cognizant-f1-2025-team-polo_ss5_p-202359043+pv-1+u-remfslk2yiuc6ugrwouf+v-dicgv7psiyqbco8qrcnb.jpg?_hv=2&w=1018'},
  {id:13, team:'Aston Martin', name:'Cap Limited Edition', cat:'Headwear', price:38, img:'https://images.footballfanatics.com/aston-martin/aston-martin-rolling-stones-special-edition-cap-white/green_ss5_p-202047025+pv-1+u-wwbbw2hh83gntcg8llnu+v-nsydvoaik3tsr6dem4gg.jpg?_hv=2&w=1018'},
  {id:14, team:'Alpine', name:'Team Polo - Men', cat:'Men', price:47, img:'https://images.footballfanatics.com/alpine/alpine-f1-team-2025-polo-navy_ss5_p-201494917+pv-1+u-zw7hweeljjisdvruznuv+v-98zrgixqdiahfdpkoeuf.jpg?_hv=2&w=1018'},
  {id:15, team:'Alpine', name:'Blue Hoodie', cat:'Women', price:72, img:'https://images.footballfanatics.com/alpine/alpine-f1-essential-hoodie-blue-unisex_ss5_p-201964061+pv-1+u-vwtdqi152h6knkhyiyy4+v-fl4vsszz3sjjfo31vrw5.jpg?_hv=2&w=1018'},
  {id:16, team:'Williams', name:'Classic Cap', cat:'Headwear', price:29, img:'https://images.footballfanatics.com/williams-racing/williams-racing-2025-team-carlos-sainz-driver-cap-blue_ss5_p-202359073+pv-1+u-0ndgajvutf9s1aytx9ml+v-dj40gdsztamsh7oos3i6.jpg?_hv=2&w=1018'},
  {id:17, team:'Williams', name:'Rain Jacket', cat:'Men', price:110, img:'https://images.footballfanatics.com/williams-racing/williams-racing-2025-team-rain-jacket_ss5_p-202359066+pv-2+u-bvjtpfg1xunsrntlqojz+v-baxmguaeiexyx4nk9tmo.jpg?_hv=2&w=1018'},
  {id:18, team:'RB', name:'Team Polo', cat:'Men', price:48, img:'https://images.footballfanatics.com/vcarb/vcarb-hugo-2025-team-polo-white_ss5_p-202284788+pv-1+u-zx9rbeixzyl2agvfj6dy+v-vtheelxhhfyasbqniyra.jpg?_hv=2&w=1018'},
  {id:19, team:'RB', name:'Driver Hat', cat:'Headwear', price:36, img:'https://images.footballfanatics.com/vcarb/vcarb-new-era-9forty-essential-cap-blue_ss5_p-202169024+pv-1+u-mmqf0lsrt1j7kc6kmj5k+v-lywtqj8zcrz6akdguvns.jpg?_hv=2&w=1018'},
  {id:20, team:'Sauber', name:'Team Shir Zip Sweat', cat:'Men', price:54, img:'https://images.footballfanatics.com/kick-sauber/stake-sauber-f1-team-2025-team-quarter-zip-sweat_ss5_p-202596058+pv-1+u-ainjenyktphsbslaxccv+v-fpwcbiwtxuoujr4xdgh6.jpg?_hv=2&w=1018'},
  {id:21, team:'Sauber', name:'Green Edition Cap', cat:'Headwear', price:31, img:'https://images.footballfanatics.com/kick-sauber/kick-sauber-f1-2025-gabriel-bortoleto-driver-cap_ss5_p-203037740+pv-1+u-hyane5h4y9p1umwahslu+v-6nwsvdzf5yytvxivg6g9.jpg?_hv=2&w=1018'},
  {id:22, team:'Haas', name:'Black Print T-Shirt', cat:'Men', price:60, img:'https://images.footballfanatics.com/haas-f1-team/haas-f1-moneygram-vf-25-back-print-t-shirt-black_ss5_p-202620512+pv-1+u-jljl4evrnblvo3gg1l3b+v-vgybqzvesfaejxtzykr5.jpg?_hv=2&w=1018'},
  {id:23, team:'Haas', name:'Team Cap Special Edition', cat:'Headwear', price:30, img:'https://images.footballfanatics.com/haas-f1-team/haas-f1-2025-new-era-special-edition-austin-gp-cap_ss5_p-202811799+pv-1+u-iu8yk3b5bilnp03sttal+v-nnf8lyekdfitvy2zhqya.jpg?_hv=2&w=1018'},
];

const sizes=['XS','S','M','L','XL'];
const state={cat:'All',sort:null,items:[],promo:null,search:''};

/* ===== Helpers ===== */
const fmt=n=>'Â£'+n.toFixed(2);

/* ===== Search ===== */
const searchEl=document.getElementById('search');
const clearBtn=document.getElementById('clearSearch');
const doSearchBtn=document.getElementById('doSearch');
const resultBadge=document.getElementById('resultBadge');
const lastSearch=localStorage.getItem('shop:lastSearch')||'';
if(lastSearch){state.search=lastSearch;searchEl.value=lastSearch;clearBtn.style.display='inline-grid';}
const triggerSearch=()=>{state.search=searchEl.value.trim();localStorage.setItem('shop:lastSearch',state.search);clearBtn.style.display=state.search?'inline-grid':'none';renderGrid();};
doSearchBtn.onclick=triggerSearch;
searchEl.addEventListener('keydown',e=>{if(e.key==='Enter') triggerSearch();});
searchEl.addEventListener('input',e=>{if(!e.target.value) triggerSearch();});
clearBtn.onclick=()=>{searchEl.value='';triggerSearch();};
function showResultBadge(count){resultBadge.style.display=state.search?'inline-block':'none';if(state.search){resultBadge.textContent=`Results: ${count} for "${state.search}"`;}}

/* ===== Product filter ===== */
function byCategory(){return catalog.filter(p=>state.cat==='All'?true:p.cat===state.cat)}
function bySearch(list){if(!state.search) return list;const q=state.search.toLowerCase();return list.filter(p=>p.name.toLowerCase().includes(q)||p.team.toLowerCase().includes(q)||p.cat.toLowerCase().includes(q));}
function products(){let list=byCategory();list=bySearch(list);if(state.sort==='price')list=[...list].sort((a,b)=>a.price-b.price);return list}

/* ===== Grid render ===== */
function renderGrid(){
  const grid=document.getElementById('grid');grid.innerHTML='';
  const list=products();showResultBadge(list.length);
  list.forEach(p=>{
    const el=document.createElement('article');el.className='card';
    el.innerHTML=`
      <div class="img" style="background-image:url('${p.img}')"><span class="badge">${p.team}</span></div>
      <div class="body">
        <div class="team">${p.team} â€¢ ${p.cat}</div>
        <div class="name">${p.name}</div>
        <div class="price"><b>${fmt(p.price)}</b></div>
        <div class="row">
          <select class="sel">${sizes.map(s=>`<option>${s}</option>`).join('')}</select>
          <input class="qty" type="number" min="1" value="1"/>
        </div>
        <button class="btn add">Add to cart</button>
      </div>`;
    el.querySelector('.add').onclick=()=>{
      const size=el.querySelector('.sel').value;
      const qty=Math.max(1,parseInt(el.querySelector('.qty').value||'1',10));
      addToCart(p,size,qty);
    };
    grid.appendChild(el);
  });
}

/* ===== Cart ===== */
function addToCart(prod,size,qty){const line=state.items.find(l=>l.id===prod.id&&l.size===size);if(line)line.qty+=qty;else state.items.push({...prod,size,qty});updateCart();}
function updateCart(){
  const box=document.getElementById('cartItems');const count=document.getElementById('cartCount');const msg=document.getElementById('promoMsg');
  box.innerHTML='';
  if(!state.items.length){
    box.innerHTML='<div class="cart-empty">Your cart is empty.</div>';
    document.getElementById('itemsCount').textContent=0;document.getElementById('subTotal').textContent=fmt(0);
    document.getElementById('discount').textContent='â€”';document.getElementById('grand').textContent=fmt(0);count.textContent=0;msg.textContent='';return;
  }
  let subtotal=0;
  state.items.forEach((l,i)=>{
    subtotal+=l.price*l.qty;
    const row=document.createElement('div');row.className='cart-item';
    row.innerHTML=`
      <div class="thumb" style="background-image:url('${l.img}')"></div>
      <div class="meta">
        <div><b>${l.team}</b> â€” ${l.name}</div>
        <small>Size: ${l.size} â€¢ ${fmt(l.price)} each</small>
        <div class="qtybox">
          <button class="icon-btn">âˆ’</button>
          <span>${l.qty}</span>
          <button class="icon-btn">+</button>
          <span class="rm">Remove</span>
        </div>
      </div>
      <div><b>${fmt(l.price*l.qty)}</b></div>`;
    const btns=row.querySelectorAll('.icon-btn');
    btns[0].onclick=()=>{l.qty=Math.max(1,l.qty-1);updateCart();};
    btns[1].onclick=()=>{l.qty+=1;updateCart();};
    row.querySelector('.rm').onclick=()=>{state.items.splice(i,1);updateCart();};
    box.appendChild(row);
  });
  const discount=(state.promo==='FITRACK')?subtotal*0.30:0;const total=Math.max(0,subtotal-discount);
  document.getElementById('itemsCount').textContent=state.items.reduce((a,b)=>a+b.qty,0);
  document.getElementById('subTotal').textContent=fmt(subtotal);
  document.getElementById('discount').textContent=discount?'âˆ’ '+fmt(discount)+' (FITRACK)':'â€”';
  document.getElementById('grand').textContent=fmt(total);
  count.textContent=state.items.reduce((a,b)=>a+b.qty,0);
  const code=(document.getElementById('promo').value||'').trim().toUpperCase();
  msg.textContent=state.promo==='FITRACK'?'Coupon applied: 30% off the subtotal.':(code==='FITRACK'?'Tap Apply to use 30% OFF coupon.':'');
}

/* ===== UI wiring ===== */
document.querySelectorAll('.pill').forEach(p=>{
  p.onclick=()=>{document.querySelectorAll('.pill').forEach(x=>x.classList.remove('active'));p.classList.add('active');state.cat=p.dataset.cat;renderGrid();};
});
document.getElementById('sortPrice').onclick=()=>{state.sort=state.sort==='price'?null:'price';document.getElementById('sortPrice').textContent=state.sort?'Sort: Price â†‘':'Sort: Price';renderGrid();};
document.getElementById('openCart').onclick=()=>{document.getElementById('cartPanel').scrollIntoView({behavior:'smooth'})};
document.getElementById('apply').onclick=()=>{const code=(document.getElementById('promo').value||'').trim().toUpperCase();state.promo=(code==='FITRACK')?'FITRACK':null;updateCart();};

/* ===== Auth demo retained (optional to use) ===== */
const emailRx=/^[^\s@]+@[^\s@]+\.[^\s@]+$/; const phoneRx=/^\+?\d[\d\s\-()]{7,}$/; const passRx=/^(?=.*[A-Za-z])(?=.*\d).{6,}$/;
const overlay=document.getElementById('overlay');
const profilePanel=document.getElementById('profilePanel');
const profileBody=document.getElementById('profileBody');
const btnProfile=document.getElementById('btnProfile');
const btnLogout=document.getElementById('btnLogout');
const btnLogin=document.getElementById('btnLogin');
const btnSignup=document.getElementById('btnSignup');
const drawerLogin=document.getElementById('drawerLogin');
const drawerSignup=document.getElementById('drawerSignup');

const openProfile=()=>{overlay.classList.add('open');profilePanel.classList.add('open');};
const closeProfile=()=>{overlay.classList.remove('open');profilePanel.classList.remove('open');};
document.getElementById('closeProfile').onclick=closeProfile; overlay.onclick=closeProfile;
document.querySelectorAll('[data-close]').forEach(b=>b.addEventListener('click',()=>{document.querySelector(b.dataset.close).style.display='none';overlay.classList.remove('open');}));
btnLogin.onclick=()=>{drawerLogin.style.display='grid';overlay.classList.add('open');};
btnSignup.onclick=()=>{drawerSignup.style.display='grid';overlay.classList.add('open');};
overlay.addEventListener('click',e=>{ if(e.target===overlay){drawerLogin.style.display='none';drawerSignup.style.display='none';}});

document.getElementById('doSignup').onclick=()=>{
  const name=document.getElementById('suName').value.trim();
  const email=(document.getElementById('suEmail').value||'').trim().toLowerCase();
  const phone=(document.getElementById('suPhone').value||'').trim();
  const pass=document.getElementById('suPass').value||'';
  const pass2=document.getElementById('suPass2').value||'';
  const err=document.getElementById('errSu');const ok=document.getElementById('okSignup');err.textContent='';ok.textContent='';
  if(!name) return err.textContent='Name is required.';
  if(!emailRx.test(email)) return err.textContent='Enter a valid email.';
  if(!phoneRx.test(phone)) return err.textContent='Enter a valid phone.';
  if(!passRx.test(pass)) return err.textContent='Password must be 6+ chars incl. a letter & number.';
  if(pass!==pass2) return err.textContent='Passwords do not match.';
  localStorage.setItem('shop:user',JSON.stringify({name,email,phone,password:pass}));
  ok.textContent='Account created. You can Log In now.';
};
document.getElementById('doLogin').onclick=()=>{
  const email=(document.getElementById('liEmail').value||'').trim().toLowerCase();
  const pass=document.getElementById('liPass').value||''; const err=document.getElementById('errLogin');err.textContent='';
  if(!emailRx.test(email)) return err.textContent='Invalid email format.'; if(!pass) return err.textContent='Password is required.';
  const stored=localStorage.getItem('shop:user'); if(!stored) return err.textContent='No account found. Please Sign Up first.';
  const u=JSON.parse(stored); if(u.email!==email||u.password!==pass) return err.textContent='Email or password is incorrect.';
  localStorage.setItem('shop:loggedIn','1'); drawerLogin.style.display='none'; overlay.classList.remove('open'); updateAuthUI(); fillProfileAndOpen(u);
};
function updateAuthUI(){const logged=localStorage.getItem('shop:loggedIn')==='1';btnLogin.style.display=logged?'none':'';btnSignup.style.display=logged?'none':'';btnProfile.style.display=logged?'':'none';btnLogout.style.display=logged?'':'none';}
btnLogout.onclick=()=>{localStorage.removeItem('shop:loggedIn');updateAuthUI();closeProfile();};
function fillProfileAndOpen(user){
  const u=user||JSON.parse(localStorage.getItem('shop:user')||'null'); if(!u) return;
  profileBody.innerHTML=`<div class="profile-row"><small>Name</small><div class="profile-val">${u.name}</div></div>
    <div class="profile-row"><small>Email</small><div class="profile-val">${u.email}</div></div>
    <div class="profile-row"><small>Phone</small><div class="profile-val">${u.phone}</div></div>`;
  openProfile();
}
btnProfile.onclick=()=>fillProfileAndOpen();
(function initAuth(){updateAuthUI();closeProfile();})();

/* ===== Payment flow ===== */
const payWrap=document.getElementById('payWrap');
const payBody=document.getElementById('payBody');
const closePay=document.getElementById('closePay');

function openPay(){
  if(!state.items.length){alert('Your cart is empty. Add items first.');return;}
  const totalText=document.getElementById('grand').textContent;
  payBody.innerHTML=`
    <div class="field"><div class="small">Youâ€™re paying <b>${totalText}</b></div></div>
    <div class="field"><label>Cardholder Name</label><input id="pName" placeholder="Ayrton Senna"/><div id="eName" class="err"></div></div>
    <div class="row2">
      <div class="field"><label>Email</label><input id="pEmail" placeholder="you@example.com"/><div id="eEmail" class="err"></div></div>
      <div class="field"><label>Phone</label><input id="pPhone" placeholder="+7 777 123 45 67"/><div id="ePhone" class="err"></div></div>
    </div>
    <div class="field"><label>Card Number</label><input id="pCard" inputmode="numeric" placeholder="4242 4242 4242 4242"/><div id="eCard" class="err"></div></div>
    <div class="row2">
      <div class="field"><label>Expiry (MM/YY)</label><input id="pExp" inputmode="numeric" placeholder="12/27"/><div id="eExp" class="err"></div></div>
      <div class="field"><label>CVC</label><input id="pCvc" inputmode="numeric" placeholder="123"/><div id="eCvc" class="err"></div></div>
    </div>
    <div class="field"><label>Billing Address</label><input id="pAddr" placeholder="Street, City, Country"/><div id="eAddr" class="err"></div></div>
    <button class="pay-btn" id="payNow">Pay ${totalText}</button>
    <div class="pay-note">Demo only â€” no real payment is processed.</div>
  `;
  payWrap.classList.add('open');
}
function closePayModal(){payWrap.classList.remove('open');}
closePay.onclick=closePayModal; payWrap.addEventListener('click',e=>{if(e.target===payWrap) closePayModal();});
document.getElementById('checkoutBtn').onclick=openPay;

/* Validation helpers */
function luhn(num){
  const s=(num||'').replace(/\D/g,'');
  let sum=0, alt=false;
  for(let i=s.length-1;i>=0;i--){
    let n=parseInt(s[i],10);
    if(alt){ n*=2; if(n>9) n-=9; }
    sum+=n; alt=!alt;
  }
  return s.length>=13 && sum%10===0;
}
function mmYYok(v){
  const mmyy=(v||'').trim();
  if(!/^\d{2}\/\d{2}$/.test(mmyy)) return false;
  const [mm,yy]=mmyy.split('/').map(x=>parseInt(x,10));
  if(mm<1||mm>12) return false;
  const now=new Date(); const year=2000+yy; const exp=new Date(year,mm);
  return exp>now;
}

payBody.addEventListener('click',e=>{
  if(e.target.id==='payNow'){
    const name=document.getElementById('pName').value.trim();
    const email=document.getElementById('pEmail').value.trim().toLowerCase();
    const phone=document.getElementById('pPhone').value.trim();
    const card=document.getElementById('pCard').value;
    const exp=document.getElementById('pExp').value;
    const cvc=document.getElementById('pCvc').value.trim();
    const addr=document.getElementById('pAddr').value.trim();

    let ok=true;
    const set=(id,msg)=>{document.getElementById(id).textContent=msg||''; if(msg) ok=false;}
    set('eName', name?'' : 'Enter cardholder name.');
    set('eEmail', /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)?'' : 'Invalid email.');
    set('ePhone', /^\+?\d[\d\s\-()]{7,}$/.test(phone)?'' : 'Invalid phone.');
    set('eCard', luhn(card)?'' : 'Card number is not valid.');
    set('eExp', mmYYok(exp)?'' : 'Expiry must be future MM/YY.');
    set('eCvc', /^\d{3,4}$/.test(cvc)?'' : '3â€“4 digits.');
    set('eAddr', addr?'' : 'Billing address required.');

    if(!ok) return;

    // Processing
    payBody.innerHTML=`<div class="center" style="padding:14px 0"><div class="spinner"></div><div>Processing paymentâ€¦</div></div>`;

    setTimeout(()=>{
      const total=document.getElementById('grand').textContent;
      const orderId='F1'+Math.random().toString(36).slice(2,10).toUpperCase();
      // save order
      localStorage.setItem('shop:lastOrder',JSON.stringify({
        id:orderId,total,items:state.items,when:new Date().toISOString(),email
      }));
      // clear cart
      state.items.length=0; updateCart();

      payBody.innerHTML=`
        <div class="center" style="gap:8px;font-weight:800;color:var(--ok)">âœ“ Payment successful</div>
        <div class="receipt">
          <div><b>Order:</b> ${orderId}</div>
          <div><b>Amount:</b> ${total}</div>
          <div><b>Status:</b> Paid</div>
        </div>
        <button class="pay-btn" id="closeAfterPay" style="margin-top:12px">Done</button>
      `;
      document.getElementById('closeAfterPay').onclick=closePayModal;
    }, 1800);
  }
});

/* ===== Init ===== */
renderGrid(); updateCart();
</script>
</body>
</html>


